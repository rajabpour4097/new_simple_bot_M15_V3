<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø±Ø¨Ø§Øª Ù…Ø¹Ø§Ù…Ù„Ø§ØªÛŒ M15</title>
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e0e0e0;
            margin: 0;
            padding: 20px;
            line-height: 1.8;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: #00d4ff;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }
        .subtitle {
            text-align: center;
            color: #888;
            margin-bottom: 40px;
        }
        h2 {
            color: #ff6b6b;
            border-bottom: 2px solid #ff6b6b;
            padding-bottom: 10px;
            margin-top: 40px;
        }
        h3 {
            color: #ffd93d;
            margin-top: 30px;
        }
        .section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .flowchart {
            background: #0f0f23;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }
        .flowchart pre {
            margin: 0;
            color: #6ee7b7;
            font-size: 14px;
            line-height: 1.6;
        }
        .code-block {
            background: #1e1e3f;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            overflow-x: auto;
            border-left: 4px solid #00d4ff;
        }
        .highlight-green { color: #6ee7b7; }
        .highlight-red { color: #ff6b6b; }
        .highlight-yellow { color: #ffd93d; }
        .highlight-blue { color: #00d4ff; }
        .highlight-purple { color: #c084fc; }
        
        .warning {
            background: rgba(255, 107, 107, 0.2);
            border: 1px solid #ff6b6b;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        .info {
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid #00d4ff;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        .success {
            background: rgba(110, 231, 183, 0.1);
            border: 1px solid #6ee7b7;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 12px;
            text-align: right;
        }
        th {
            background: rgba(0, 212, 255, 0.2);
            color: #00d4ff;
        }
        tr:nth-child(even) {
            background: rgba(255, 255, 255, 0.03);
        }
        
        .diagram {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }
        .box {
            background: linear-gradient(135deg, #2d2d44 0%, #1a1a2e 100%);
            border: 2px solid;
            border-radius: 10px;
            padding: 15px 20px;
            text-align: center;
            min-width: 150px;
        }
        .box-blue { border-color: #00d4ff; }
        .box-green { border-color: #6ee7b7; }
        .box-red { border-color: #ff6b6b; }
        .box-yellow { border-color: #ffd93d; }
        .box-purple { border-color: #c084fc; }
        
        .arrow {
            font-size: 24px;
            color: #888;
        }
        
        .timeline {
            position: relative;
            padding: 20px 0;
        }
        .timeline-item {
            display: flex;
            margin: 15px 0;
            align-items: flex-start;
        }
        .timeline-time {
            background: #00d4ff;
            color: #000;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            min-width: 80px;
            text-align: center;
            margin-left: 20px;
        }
        .timeline-content {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
        }
        
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        @media (max-width: 768px) {
            .comparison {
                grid-template-columns: 1fr;
            }
        }
        
        .toc {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }
        .toc a {
            color: #00d4ff;
            text-decoration: none;
            display: block;
            padding: 5px 0;
        }
        .toc a:hover {
            color: #ffd93d;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¤– Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø±Ø¨Ø§Øª Ù…Ø¹Ø§Ù…Ù„Ø§ØªÛŒ M15</h1>
        <p class="subtitle">Ù†Ø³Ø®Ù‡ Ø¨Ø§ ÙÛŒÙ„ØªØ± M15 Ùˆ ØªØ£Ø®ÛŒØ± ÙˆØ±ÙˆØ¯ Ø±ÙˆÛŒ Ù…Ø±Ø² 15 Ø¯Ù‚ÛŒÙ‚Ù‡</p>
        
        <div class="toc">
            <h3>ğŸ“‘ ÙÙ‡Ø±Ø³Øª Ù…Ø·Ø§Ù„Ø¨</h3>
            <a href="#overview">1. Ù†Ù…Ø§ÛŒ Ú©Ù„ÛŒ Ø³ÛŒØ³ØªÙ…</a>
            <a href="#m15-filter">2. ÙÛŒÙ„ØªØ± M15 - Ù…Ù†Ø·Ù‚ Ùˆ Ø¹Ù…Ù„Ú©Ø±Ø¯</a>
            <a href="#m15-boundary">3. ØªØ´Ø®ÛŒØµ Ù…Ø±Ø² M15 Ùˆ Ø³ÛŒÚ¯Ù†Ø§Ù„ Ù…Ø¹Ù„Ù‚</a>
            <a href="#signal-flow">4. Ø¬Ø±ÛŒØ§Ù† ØªÙˆÙ„ÛŒØ¯ Ùˆ Ø§Ø¬Ø±Ø§ÛŒ Ø³ÛŒÚ¯Ù†Ø§Ù„</a>
            <a href="#timing">5. Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ Ùˆ Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„ÛŒ</a>
            <a href="#validation">6. Ú†Ú©â€ŒÙ„ÛŒØ³Øª ØµØ­Øªâ€ŒØ³Ù†Ø¬ÛŒ</a>
        </div>

        <!-- Section 1: Overview -->
        <div class="section" id="overview">
            <h2>1. Ù†Ù…Ø§ÛŒ Ú©Ù„ÛŒ Ø³ÛŒØ³ØªÙ…</h2>
            
            <h3>ğŸ¯ Ù‡Ø¯Ù Ø§ØµÙ„ÛŒ</h3>
            <p>
                Ø§ÛŒÙ† Ø±Ø¨Ø§Øª Ø¨Ø± Ø§Ø³Ø§Ø³ Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ <strong>Fibonacci Retracement</strong> Ø¨Ø§ ÙÛŒÙ„ØªØ± <strong>M15</strong> Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
                Ù‡Ø¯Ù Ø§ÛŒÙ† Ø§Ø³Øª Ú©Ù‡ ÙÙ‚Ø· Ù…Ø¹Ø§Ù…Ù„Ø§ØªÛŒ Ø¨Ø§Ø² Ø´ÙˆÙ†Ø¯ Ú©Ù‡ Ú©Ù†Ø¯Ù„ 15 Ø¯Ù‚ÛŒÙ‚Ù‡â€ŒØ§ÛŒ <strong>ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡</strong> Ø¨Ø§ Ø¬Ù‡Øª Ù…Ø¹Ø§Ù…Ù„Ù‡ Ù‡Ù…Ø³Ùˆ Ø¨Ø§Ø´Ø¯.
            </p>
            
            <div class="diagram">
                <div class="box box-blue">ğŸ“Š Ø¯Ø§Ø¯Ù‡ M1</div>
                <span class="arrow">â†’</span>
                <div class="box box-yellow">ğŸ” Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Swing</div>
                <span class="arrow">â†’</span>
                <div class="box box-purple">ğŸ“ Ù…Ø­Ø§Ø³Ø¨Ù‡ Fibonacci</div>
                <span class="arrow">â†’</span>
                <div class="box box-green">âœ… ÙÛŒÙ„ØªØ± M15</div>
                <span class="arrow">â†’</span>
                <div class="box box-red">ğŸ’¹ ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù…Ø¹Ø§Ù…Ù„Ù‡</div>
            </div>

            <h3>ğŸ“‹ Ù…Ø±Ø§Ø­Ù„ Ú©Ù„ÛŒ</h3>
            <table>
                <tr>
                    <th>Ù…Ø±Ø­Ù„Ù‡</th>
                    <th>ØªÙˆØ¶ÛŒØ­</th>
                    <th>ÙØ§ÛŒÙ„/ØªØ§Ø¨Ø¹</th>
                </tr>
                <tr>
                    <td>1. Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø§Ø¯Ù‡</td>
                    <td>Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†Ø¯Ù„â€ŒÙ‡Ø§ÛŒ M1 Ø§Ø² MT5</td>
                    <td>mt5_conn.get_historical_data()</td>
                </tr>
                <tr>
                    <td>2. Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Legs</td>
                    <td>ØªØ´Ø®ÛŒØµ Ø­Ø±Ú©Ø§Øª Ø¨Ø²Ø±Ú¯ Ù‚ÛŒÙ…Øª</td>
                    <td>get_legs()</td>
                </tr>
                <tr>
                    <td>3. Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Swing</td>
                    <td>ØªØ´Ø®ÛŒØµ Ù†Ù‚Ø§Ø· Ú†Ø±Ø®Ø´ (bullish/bearish)</td>
                    <td>get_swing_points()</td>
                </tr>
                <tr>
                    <td>4. Ù…Ø­Ø§Ø³Ø¨Ù‡ Fibonacci</td>
                    <td>ØªØ¹ÛŒÛŒÙ† Ø³Ø·ÙˆØ­ 0.0, 0.705, 0.9, 1.0</td>
                    <td>fibonacci_retracement()</td>
                </tr>
                <tr>
                    <td>5. First/Second Touch</td>
                    <td>Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø±Ø§ÛŒ Ù„Ù…Ø³ Ø³Ø·Ø­ 0.705</td>
                    <td>state.first_touch, state.second_touch</td>
                </tr>
                <tr>
                    <td>6. ÙÛŒÙ„ØªØ± M15</td>
                    <td>Ø¨Ø±Ø±Ø³ÛŒ Ù‡Ù…Ø³ÙˆÛŒÛŒ Ú©Ù†Ø¯Ù„ M15</td>
                    <td>check_m15_aligned_with_position()</td>
                </tr>
                <tr>
                    <td>7. Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø±Ø² M15</td>
                    <td>Ø§Ú¯Ø± Ø±ÙˆÛŒ Ù…Ø±Ø² Ø¨Ø§Ø´Ø¯ â†’ ØªØ£Ø®ÛŒØ±</td>
                    <td>is_at_m15_boundary()</td>
                </tr>
                <tr>
                    <td>8. Ø§Ø¬Ø±Ø§ÛŒ Ù…Ø¹Ø§Ù…Ù„Ù‡</td>
                    <td>Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù¾ÙˆØ²ÛŒØ´Ù† Ø¯Ø± MT5</td>
                    <td>open_buy_position() / open_sell_position()</td>
                </tr>
            </table>
        </div>

        <!-- Section 2: M15 Filter -->
        <div class="section" id="m15-filter">
            <h2>2. ÙÛŒÙ„ØªØ± M15 - Ù…Ù†Ø·Ù‚ Ùˆ Ø¹Ù…Ù„Ú©Ø±Ø¯</h2>
            
            <h3>ğŸ“Œ ØªØ§Ø¨Ø¹ get_last_completed_m15_candle()</h3>
            <div class="code-block">
<span class="highlight-green"># Ø¯Ø±ÛŒØ§ÙØª Ø¢Ø®Ø±ÛŒÙ† Ú©Ù†Ø¯Ù„ M15 ØªÚ©Ù…ÛŒÙ„â€ŒØ´Ø¯Ù‡</span>
rates = mt5.copy_rates_from_pos(symbol, mt5.TIMEFRAME_M15, 0, 3)

<span class="highlight-yellow"># Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§:</span>
rates[-1] = Ú©Ù†Ø¯Ù„ Ø¯Ø± Ø­Ø§Ù„ ØªØ´Ú©ÛŒÙ„ (Ù†Ø§Ù‚Øµ) âŒ
rates[-2] = Ø¢Ø®Ø±ÛŒÙ† Ú©Ù†Ø¯Ù„ Ú©Ø§Ù…Ù„ Ø´Ø¯Ù‡ âœ…  <span class="highlight-green">â† Ø§ÛŒÙ† Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯</span>
rates[-3] = Ú©Ù†Ø¯Ù„ Ù‚Ø¨Ù„â€ŒØªØ±
            </div>
            
            <div class="info">
                <strong>ğŸ”‘ Ù†Ú©ØªÙ‡ Ù…Ù‡Ù…:</strong> Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ Ù‡Ù…ÛŒØ´Ù‡ Ú©Ù†Ø¯Ù„ <strong>ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡</strong> Ø±Ø§ Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø§Ù†Ø¯ØŒ Ù†Ù‡ Ú©Ù†Ø¯Ù„ Ø¯Ø± Ø­Ø§Ù„ ØªØ´Ú©ÛŒÙ„.
            </div>

            <h3>ğŸ“Œ ØªØ§Ø¨Ø¹ check_m15_aligned_with_position()</h3>
            <table>
                <tr>
                    <th>Ù†ÙˆØ¹ Ù¾ÙˆØ²ÛŒØ´Ù†</th>
                    <th>M15 Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø²</th>
                    <th>Ø´Ø±Ø·</th>
                </tr>
                <tr>
                    <td class="highlight-green">BUY</td>
                    <td>Bullish (ØµØ¹ÙˆØ¯ÛŒ)</td>
                    <td>close > open</td>
                </tr>
                <tr>
                    <td class="highlight-red">SELL</td>
                    <td>Bearish (Ù†Ø²ÙˆÙ„ÛŒ)</td>
                    <td>close < open</td>
                </tr>
            </table>

            <div class="flowchart">
<pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ÙÛŒÙ„ØªØ± M15 - ÙÙ„ÙˆÚ†Ø§Ø±Øª                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Ø³ÛŒÚ¯Ù†Ø§Ù„ BUY   â”‚
                        â”‚ ÛŒØ§ SELL      â”‚
                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ get_last_completed    â”‚
                   â”‚ _m15_candle()         â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Ø¢ÛŒØ§ M15 Ù‡Ù…Ø³Ùˆ Ø§Ø³ØªØŸ     â”‚
                   â”‚ BUY â†’ bullish?        â”‚
                   â”‚ SELL â†’ bearish?       â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ YES            â”‚                â”‚ NO
              â–¼                                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ù‡ Ù…Ø±Ø­Ù„Ù‡  â”‚               â”‚ âŒ SKIP Ø³ÛŒÚ¯Ù†Ø§Ù„  â”‚
    â”‚ Ø¨Ø¹Ø¯ÛŒ (Ø¨Ø±Ø±Ø³ÛŒ    â”‚               â”‚ Ø§ÛŒÙ…ÛŒÙ„ Ø§Ø±Ø³Ø§Ù„ Ø´ÙˆØ¯ â”‚
    â”‚ Ù…Ø±Ø² M15)        â”‚               â”‚ state.reset()   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>
            </div>
        </div>

        <!-- Section 3: M15 Boundary -->
        <div class="section" id="m15-boundary">
            <h2>3. ØªØ´Ø®ÛŒØµ Ù…Ø±Ø² M15 Ùˆ Ø³ÛŒÚ¯Ù†Ø§Ù„ Ù…Ø¹Ù„Ù‚</h2>
            
            <h3>ğŸ¯ Ù…Ø´Ú©Ù„ Ø§ØµÙ„ÛŒ</h3>
            <div class="warning">
                <strong>âš ï¸ Look-Ahead Bias:</strong>
                Ø§Ú¯Ø± Ø³ÛŒÚ¯Ù†Ø§Ù„ Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ø±ÙˆÛŒ Ù…Ø±Ø² 15 Ø¯Ù‚ÛŒÙ‚Ù‡ Ø¨Ø§Ø´Ø¯ (Ù…Ø«Ù„Ø§Ù‹ 12:30:00)ØŒ Ú©Ù†Ø¯Ù„ M15 Ú©Ù‡ Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø¯ (12:15-12:30) 
                Ù‡Ù†ÙˆØ² Ø¯Ø± Ø­Ø§Ù„ ØªØ´Ú©ÛŒÙ„ Ø§Ø³Øª Ùˆ close Ø¢Ù† Ù†Ù‡Ø§ÛŒÛŒ Ù†ÛŒØ³Øª!
            </div>

            <h3>ğŸ“Œ ØªØ§Ø¨Ø¹ is_at_m15_boundary()</h3>
            <div class="code-block">
<span class="highlight-blue">def</span> is_at_m15_boundary(dt: datetime = None) -> bool:
    <span class="highlight-green">"""
    Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ø¢ÛŒØ§ Ø²Ù…Ø§Ù† ÙØ¹Ù„ÛŒ Ø±ÙˆÛŒ Ù…Ø±Ø² 15 Ø¯Ù‚ÛŒÙ‚Ù‡ Ø§Ø³Øª
    (ÛŒØ¹Ù†ÛŒ Ø¯Ù‚ÛŒÙ‚Ù‡ = 0ØŒ 15ØŒ 30ØŒ ÛŒØ§ 45)
    """</span>
    <span class="highlight-blue">if</span> dt <span class="highlight-blue">is</span> None:
        dt = datetime.now()
    <span class="highlight-blue">return</span> dt.minute % 15 == 0
            </div>

            <table>
                <tr>
                    <th>Ø²Ù…Ø§Ù†</th>
                    <th>Ø¯Ù‚ÛŒÙ‚Ù‡ % 15</th>
                    <th>Ø±ÙˆÛŒ Ù…Ø±Ø²ØŸ</th>
                    <th>Ø§Ù‚Ø¯Ø§Ù…</th>
                </tr>
                <tr>
                    <td>12:00:xx</td>
                    <td>0</td>
                    <td class="highlight-red">âœ… Ø¨Ù„Ù‡</td>
                    <td>â†’ Ø³ÛŒÚ¯Ù†Ø§Ù„ Ù…Ø¹Ù„Ù‚</td>
                </tr>
                <tr>
                    <td>12:15:xx</td>
                    <td>0</td>
                    <td class="highlight-red">âœ… Ø¨Ù„Ù‡</td>
                    <td>â†’ Ø³ÛŒÚ¯Ù†Ø§Ù„ Ù…Ø¹Ù„Ù‚</td>
                </tr>
                <tr>
                    <td>12:30:xx</td>
                    <td>0</td>
                    <td class="highlight-red">âœ… Ø¨Ù„Ù‡</td>
                    <td>â†’ Ø³ÛŒÚ¯Ù†Ø§Ù„ Ù…Ø¹Ù„Ù‚</td>
                </tr>
                <tr>
                    <td>12:45:xx</td>
                    <td>0</td>
                    <td class="highlight-red">âœ… Ø¨Ù„Ù‡</td>
                    <td>â†’ Ø³ÛŒÚ¯Ù†Ø§Ù„ Ù…Ø¹Ù„Ù‚</td>
                </tr>
                <tr>
                    <td>12:31:xx</td>
                    <td>1</td>
                    <td class="highlight-green">âŒ Ø®ÛŒØ±</td>
                    <td>â†’ Ø§Ø¬Ø±Ø§ÛŒ ÙÙˆØ±ÛŒ</td>
                </tr>
                <tr>
                    <td>12:47:xx</td>
                    <td>2</td>
                    <td class="highlight-green">âŒ Ø®ÛŒØ±</td>
                    <td>â†’ Ø§Ø¬Ø±Ø§ÛŒ ÙÙˆØ±ÛŒ</td>
                </tr>
            </table>

            <h3>ğŸ“Œ Ú©Ù„Ø§Ø³ PendingSignal</h3>
            <div class="code-block">
<span class="highlight-blue">class</span> PendingSignal:
    <span class="highlight-green">"""Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³ÛŒÚ¯Ù†Ø§Ù„ Ù…Ø¹Ù„Ù‚"""</span>
    
    signal_type: str        <span class="highlight-yellow"># 'BUY' ÛŒØ§ 'SELL'</span>
    fib_levels: dict        <span class="highlight-yellow"># Ø³Ø·ÙˆØ­ ÙÛŒØ¨ÙˆÙ†Ø§Ú†ÛŒ</span>
    fib0_time, fib1_time    <span class="highlight-yellow"># Ø²Ù…Ø§Ù† Ù†Ù‚Ø§Ø· ÙÛŒØ¨Ùˆ</span>
    first_touch_value       <span class="highlight-yellow"># Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù„Ù…Ø³ Ø§ÙˆÙ„</span>
    second_touch_value      <span class="highlight-yellow"># Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù„Ù…Ø³ Ø¯ÙˆÙ…</span>
    m15_data: dict          <span class="highlight-yellow"># Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ù†Ø¯Ù„ M15</span>
    signal_time: datetime   <span class="highlight-yellow"># Ø²Ù…Ø§Ù† Ø³ÛŒÚ¯Ù†Ø§Ù„</span>
    created_at: datetime    <span class="highlight-yellow"># Ø²Ù…Ø§Ù† Ø§ÛŒØ¬Ø§Ø¯</span>
    
    <span class="highlight-blue">def</span> is_expired(max_age_seconds=120):
        <span class="highlight-green"># Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒÙ‡Ø§ Ø¨Ø¹Ø¯ Ø§Ø² 2 Ø¯Ù‚ÛŒÙ‚Ù‡ Ù…Ù†Ù‚Ø¶ÛŒ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯</span>
        <span class="highlight-blue">return</span> (now - created_at) > 120 seconds
            </div>

            <div class="flowchart">
<pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Ù…Ù†Ø·Ù‚ Ø³ÛŒÚ¯Ù†Ø§Ù„ Ù…Ø¹Ù„Ù‚ - ÙÙ„ÙˆÚ†Ø§Ø±Øª                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Ø³ÛŒÚ¯Ù†Ø§Ù„ Ø¬Ø¯ÛŒØ¯ â”‚
                        â”‚ (M15 aligned)â”‚
                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Ø¢ÛŒØ§ Ø±ÙˆÛŒ Ù…Ø±Ø² M15ØŸ      â”‚
                   â”‚ (Ø¯Ù‚ÛŒÙ‚Ù‡ % 15 == 0)     â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ YES            â”‚                â”‚ NO
              â–¼                                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ğŸ“¦ Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø±     â”‚               â”‚ âœ… Ø§Ø¬Ø±Ø§ÛŒ ÙÙˆØ±ÛŒ   â”‚
    â”‚ PendingSignal   â”‚               â”‚ Ù¾ÙˆØ²ÛŒØ´Ù†          â”‚
    â”‚                 â”‚               â”‚                 â”‚
    â”‚ Ø§ÛŒÙ…ÛŒÙ„: PENDING  â”‚               â”‚                 â”‚
    â”‚ state.reset()   â”‚               â”‚                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ <span class="highlight-yellow">Ù…Ù†ØªØ¸Ø± Ú©Ù†Ø¯Ù„ Ø¨Ø¹Ø¯ÛŒ (Ø¯Ù‚ÛŒÙ‚Ù‡ 1, 16, 31, 46)</span>
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ğŸ”„ Ø¯ÙˆØ± Ø¨Ø¹Ø¯ÛŒ loop                    â”‚
    â”‚                                     â”‚
    â”‚ if pending_signal and not boundary: â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ Ø¢ÛŒØ§ Ù…Ù†Ù‚Ø¶ÛŒ Ø´Ø¯Ù‡ØŸ  â”‚
           â”‚ (> 2 Ø¯Ù‚ÛŒÙ‚Ù‡)     â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ YES        â”‚            â”‚ NO
       â–¼                         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ âŒ Ø­Ø°Ù   â”‚          â”‚ Ø±ÛŒ-Ú†Ú© M15       â”‚
  â”‚ Ø³ÛŒÚ¯Ù†Ø§Ù„   â”‚          â”‚ (Ú©Ù†Ø¯Ù„ Ø¬Ø¯ÛŒØ¯)     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ aligned    â”‚            â”‚ not aligned
                    â–¼                         â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ âœ… Ø§Ø¬Ø±Ø§ÛŒ        â”‚        â”‚ âŒ Ø­Ø°Ù Ø³ÛŒÚ¯Ù†Ø§Ù„   â”‚
          â”‚ Ù¾ÙˆØ²ÛŒØ´Ù†          â”‚        â”‚ (M15 ØªØºÛŒÛŒØ± Ú©Ø±Ø¯) â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>
            </div>
        </div>

        <!-- Section 4: Signal Flow -->
        <div class="section" id="signal-flow">
            <h2>4. Ø¬Ø±ÛŒØ§Ù† ØªÙˆÙ„ÛŒØ¯ Ùˆ Ø§Ø¬Ø±Ø§ÛŒ Ø³ÛŒÚ¯Ù†Ø§Ù„</h2>
            
            <h3>ğŸ”„ Ø¬Ø±ÛŒØ§Ù† Ú©Ø§Ù…Ù„ Ø¨Ø±Ø§ÛŒ Ø³ÛŒÚ¯Ù†Ø§Ù„ BUY</h3>
            <div class="flowchart">
<pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Ø¬Ø±ÛŒØ§Ù† Ú©Ø§Ù…Ù„ Ø³ÛŒÚ¯Ù†Ø§Ù„ BUY                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1ï¸âƒ£ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Swing Bullish
   â”‚
   â”œâ”€â”€ legs > 2 âœ…
   â”œâ”€â”€ swing_type == 'bullish' âœ…
   â””â”€â”€ close > legs[1]['start_value'] âœ…
                â”‚
                â–¼
2ï¸âƒ£ Ø§ÛŒØ¬Ø§Ø¯ Fibonacci
   â”‚
   â”œâ”€â”€ fib['0.0'] = Ù‚Ù„Ù‡ (Ù…Ù‚Ø§ÙˆÙ…Øª)
   â”œâ”€â”€ fib['0.705'] = Ù†Ø§Ø­ÛŒÙ‡ ÙˆØ±ÙˆØ¯
   â”œâ”€â”€ fib['0.9'] = Ù†Ø²Ø¯ÛŒÚ© Ø­Ù…Ø§ÛŒØª
   â””â”€â”€ fib['1.0'] = Ø­Ù…Ø§ÛŒØª (SL)
                â”‚
                â–¼
3ï¸âƒ£ Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø±Ø§ÛŒ Touch
   â”‚
   â”œâ”€â”€ First Touch: Ù‚ÛŒÙ…Øª Ø¨Ù‡ fib['0.705'] Ø¨Ø±Ø³Ø¯
   â”‚   â””â”€â”€ Ø«Ø¨Øª Ú©Ù†Ø¯Ù„ Ùˆ ÙˆØ¶Ø¹ÛŒØª (bullish/bearish)
   â”‚
   â””â”€â”€ Second Touch: Ù‚ÛŒÙ…Øª Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¨Ù‡ fib['0.705'] Ø¨Ø±Ø³Ø¯
       â””â”€â”€ Ø¨Ø§ ÙˆØ¶Ø¹ÛŒØª Ù…Ø®Ø§Ù„Ù (Ù…Ø«Ù„Ø§Ù‹ Ø§ÙˆÙ„ bearishØŒ Ø¯ÙˆÙ… bullish)
                â”‚
                â–¼
4ï¸âƒ£ last_swing_type == 'bullish' AND state.second_touch == True
                â”‚
                â–¼
5ï¸âƒ£ ÙÛŒÙ„ØªØ± M15
   â”‚
   â”œâ”€â”€ m15_data = get_last_completed_m15_candle()
   â”‚   â””â”€â”€ Ú©Ù†Ø¯Ù„ M15 ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡ (rates[-2])
   â”‚
   â””â”€â”€ check_m15_aligned_with_position('BUY', m15_data)
       â”‚
       â”œâ”€â”€ âŒ NOT ALIGNED â†’ SKIP + Ø§ÛŒÙ…ÛŒÙ„ + reset
       â”‚
       â””â”€â”€ âœ… ALIGNED â†’ Ø§Ø¯Ø§Ù…Ù‡
                â”‚
                â–¼
6ï¸âƒ£ Ø¨Ø±Ø±Ø³ÛŒ Ù¾ÙˆØ²ÛŒØ´Ù†â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²
   â”‚
   â””â”€â”€ prevent_multiple_positions?
       â”‚
       â”œâ”€â”€ âŒ Ù¾ÙˆØ²ÛŒØ´Ù† Ø¨Ø§Ø² ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯ â†’ SKIP + Ø§ÛŒÙ…ÛŒÙ„
       â”‚
       â””â”€â”€ âœ… Ø¢Ø²Ø§Ø¯ Ø§Ø³Øª â†’ Ø§Ø¯Ø§Ù…Ù‡
                â”‚
                â–¼
7ï¸âƒ£ Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø±Ø² M15 â­ <span class="highlight-yellow">(Ù…Ù†Ø·Ù‚ Ø¬Ø¯ÛŒØ¯)</span>
   â”‚
   â””â”€â”€ is_at_m15_boundary()?
       â”‚
       â”œâ”€â”€ âœ… Ø±ÙˆÛŒ Ù…Ø±Ø² (Ø¯Ù‚ÛŒÙ‚Ù‡ % 15 == 0)
       â”‚   â”‚
       â”‚   â””â”€â”€ ğŸ“¦ PendingSignal Ø°Ø®ÛŒØ±Ù‡ Ø´ÙˆØ¯
       â”‚       â”œâ”€â”€ Ø§ÛŒÙ…ÛŒÙ„: "PENDING BUY - M15 BOUNDARY"
       â”‚       â”œâ”€â”€ state.reset()
       â”‚       â””â”€â”€ continue (Ù…Ù†ØªØ¸Ø± Ø¯ÙˆØ± Ø¨Ø¹Ø¯ÛŒ)
       â”‚
       â””â”€â”€ âŒ Ù†Ù‡ Ø±ÙˆÛŒ Ù…Ø±Ø² â†’ Ø§Ø¬Ø±Ø§ÛŒ ÙÙˆØ±ÛŒ
                â”‚
                â–¼
8ï¸âƒ£ Ø§Ø¬Ø±Ø§ÛŒ Ù…Ø¹Ø§Ù…Ù„Ù‡
   â”‚
   â”œâ”€â”€ entry_price = last_tick.ask
   â”œâ”€â”€ SL = fib['1.0']
   â”œâ”€â”€ TP = entry + (SL_distance Ã— win_ratio)
   â”‚
   â””â”€â”€ mt5_conn.open_buy_position()
</pre>
            </div>

            <h3>ğŸ“Š Ù…Ù‚Ø§ÛŒØ³Ù‡: Ø³ÛŒÚ¯Ù†Ø§Ù„ Ø±ÙˆÛŒ Ù…Ø±Ø² vs Ù†Ù‡ Ø±ÙˆÛŒ Ù…Ø±Ø²</h3>
            <div class="comparison">
                <div class="section" style="margin: 0;">
                    <h4 class="highlight-red">âŒ Ø³ÛŒÚ¯Ù†Ø§Ù„ Ø±ÙˆÛŒ Ù…Ø±Ø² M15</h4>
                    <p><strong>Ø²Ù…Ø§Ù†:</strong> 12:30:00</p>
                    <ul>
                        <li>Ú©Ù†Ø¯Ù„ M15 12:15-12:30 Ù‡Ù†ÙˆØ² Ø¯Ø± Ø­Ø§Ù„ ØªØ´Ú©ÛŒÙ„</li>
                        <li>close ÙØ¹Ù„ÛŒ â‰  close Ù†Ù‡Ø§ÛŒÛŒ</li>
                        <li>â†’ Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± PendingSignal</li>
                        <li>â†’ Ù…Ù†ØªØ¸Ø± 12:31:xx</li>
                    </ul>
                </div>
                <div class="section" style="margin: 0;">
                    <h4 class="highlight-green">âœ… Ø³ÛŒÚ¯Ù†Ø§Ù„ Ù†Ù‡ Ø±ÙˆÛŒ Ù…Ø±Ø²</h4>
                    <p><strong>Ø²Ù…Ø§Ù†:</strong> 12:33:00</p>
                    <ul>
                        <li>Ú©Ù†Ø¯Ù„ M15 12:15-12:30 ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡</li>
                        <li>close = close Ù†Ù‡Ø§ÛŒÛŒ</li>
                        <li>â†’ Ø§Ø¬Ø±Ø§ÛŒ ÙÙˆØ±ÛŒ Ù¾ÙˆØ²ÛŒØ´Ù†</li>
                        <li>â†’ ÙˆØ±ÙˆØ¯ Ø¨Ø§ Ù‚ÛŒÙ…Øª 12:33</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Section 5: Timing Examples -->
        <div class="section" id="timing">
            <h2>5. Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ Ùˆ Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„ÛŒ</h2>
            
            <h3>ğŸ“… Ù…Ø«Ø§Ù„ 1: Ø³ÛŒÚ¯Ù†Ø§Ù„ Ø¯Ø± 12:30 (Ø±ÙˆÛŒ Ù…Ø±Ø²)</h3>
            <div class="timeline">
                <div class="timeline-item">
                    <span class="timeline-time">12:30:05</span>
                    <div class="timeline-content">
                        <strong>Ø³ÛŒÚ¯Ù†Ø§Ù„ BUY ØªØ´Ø®ÛŒØµ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯</strong><br>
                        - M15 Ú†Ú©: Ú©Ù†Ø¯Ù„ 12:15-12:30 (rates[-2])<br>
                        - direction = bullish âœ…<br>
                        - is_at_m15_boundary() = True (30 % 15 == 0)<br>
                        - <span class="highlight-yellow">â†’ Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± PendingSignal</span>
                    </div>
                </div>
                <div class="timeline-item">
                    <span class="timeline-time">12:31:02</span>
                    <div class="timeline-content">
                        <strong>Ø¯ÙˆØ± Ø¬Ø¯ÛŒØ¯ loop</strong><br>
                        - pending_signal exists âœ…<br>
                        - is_at_m15_boundary() = False (31 % 15 == 1)<br>
                        - Ø±ÛŒ-Ú†Ú© M15: Ú©Ù†Ø¯Ù„ 12:15-12:30 (Ø§Ù„Ø§Ù† ÙˆØ§Ù‚Ø¹Ø§Ù‹ ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡)<br>
                        - direction = bullish âœ…<br>
                        - <span class="highlight-green">â†’ Ø§Ø¬Ø±Ø§ÛŒ Ù¾ÙˆØ²ÛŒØ´Ù† BUY</span><br>
                        - Entry price = Ù‚ÛŒÙ…Øª 12:31:02
                    </div>
                </div>
            </div>

            <h3>ğŸ“… Ù…Ø«Ø§Ù„ 2: Ø³ÛŒÚ¯Ù†Ø§Ù„ Ø¯Ø± 12:33 (Ù†Ù‡ Ø±ÙˆÛŒ Ù…Ø±Ø²)</h3>
            <div class="timeline">
                <div class="timeline-item">
                    <span class="timeline-time">12:33:15</span>
                    <div class="timeline-content">
                        <strong>Ø³ÛŒÚ¯Ù†Ø§Ù„ BUY ØªØ´Ø®ÛŒØµ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯</strong><br>
                        - M15 Ú†Ú©: Ú©Ù†Ø¯Ù„ 12:15-12:30 (ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡)<br>
                        - direction = bullish âœ…<br>
                        - is_at_m15_boundary() = False (33 % 15 == 3)<br>
                        - <span class="highlight-green">â†’ Ø§Ø¬Ø±Ø§ÛŒ ÙÙˆØ±ÛŒ Ù¾ÙˆØ²ÛŒØ´Ù† BUY</span><br>
                        - Entry price = Ù‚ÛŒÙ…Øª 12:33:15
                    </div>
                </div>
            </div>

            <h3>ğŸ“… Ù…Ø«Ø§Ù„ 3: Ø³ÛŒÚ¯Ù†Ø§Ù„ Ø±ÙˆÛŒ Ù…Ø±Ø² + M15 ØªØºÛŒÛŒØ± Ú©Ø±Ø¯</h3>
            <div class="timeline">
                <div class="timeline-item">
                    <span class="timeline-time">12:30:05</span>
                    <div class="timeline-content">
                        <strong>Ø³ÛŒÚ¯Ù†Ø§Ù„ BUY ØªØ´Ø®ÛŒØµ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯</strong><br>
                        - M15 (12:15-12:30 Ø¯Ø± Ø­Ø§Ù„ ØªØ´Ú©ÛŒÙ„): bullish<br>
                        - <span class="highlight-yellow">â†’ Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± PendingSignal</span>
                    </div>
                </div>
                <div class="timeline-item">
                    <span class="timeline-time">12:30:59</span>
                    <div class="timeline-content">
                        <strong>Ú©Ù†Ø¯Ù„ M15 12:15-12:30 Ø¨Ø³ØªÙ‡ Ø´Ø¯</strong><br>
                        - close Ù†Ù‡Ø§ÛŒÛŒ < open (Ù‚ÛŒÙ…Øª Ø¨Ø±Ú¯Ø´Øª!)<br>
                        - direction ÙˆØ§Ù‚Ø¹ÛŒ = <span class="highlight-red">bearish</span>
                    </div>
                </div>
                <div class="timeline-item">
                    <span class="timeline-time">12:31:02</span>
                    <div class="timeline-content">
                        <strong>Ø±ÛŒ-Ú†Ú© M15</strong><br>
                        - Ú©Ù†Ø¯Ù„ 12:15-12:30 (ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡)<br>
                        - direction = bearish âŒ (Ù†ÛŒØ§Ø² bullish Ø¨Ø±Ø§ÛŒ BUY)<br>
                        - <span class="highlight-red">â†’ Ø³ÛŒÚ¯Ù†Ø§Ù„ Ù…Ø¹Ù„Ù‚ Ø­Ø°Ù Ø´Ø¯</span><br>
                        - Ù¾ÙˆØ²ÛŒØ´Ù† Ø¨Ø§Ø² Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯!
                    </div>
                </div>
            </div>

            <div class="success">
                <strong>âœ… Ù…Ø²ÛŒØª Ø§ÛŒÙ† Ø±ÙˆØ´:</strong> Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù…Ø¹Ø§Ù…Ù„Ø§ØªÛŒ Ú©Ù‡ M15 ÙˆØ§Ù‚Ø¹ÛŒ (Ø¨Ø¹Ø¯ Ø§Ø² Ø¨Ø³ØªÙ‡ Ø´Ø¯Ù†) Ø¨Ø§ Ø¬Ù‡Øª Ù…Ø¹Ø§Ù…Ù„Ù‡ Ù‡Ù…Ø³Ùˆ Ù†ÛŒØ³Øª.
            </div>
        </div>

        <!-- Section 6: Validation Checklist -->
        <div class="section" id="validation">
            <h2>6. Ú†Ú©â€ŒÙ„ÛŒØ³Øª ØµØ­Øªâ€ŒØ³Ù†Ø¬ÛŒ</h2>
            
            <h3>âœ… Ø¨Ø±Ø±Ø³ÛŒ Ù…Ù†Ø·Ù‚ M15</h3>
            <table>
                <tr>
                    <th>Ø¢ÛŒØªÙ…</th>
                    <th>ÙˆØ¶Ø¹ÛŒØª</th>
                    <th>ØªÙˆØ¶ÛŒØ­</th>
                </tr>
                <tr>
                    <td>get_last_completed_m15_candle() Ø§Ø² rates[-2] Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯</td>
                    <td class="highlight-green">âœ…</td>
                    <td>Ú©Ù†Ø¯Ù„ ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡ØŒ Ù†Ù‡ Ø¯Ø± Ø­Ø§Ù„ ØªØ´Ú©ÛŒÙ„</td>
                </tr>
                <tr>
                    <td>BUY Ù†ÛŒØ§Ø² Ø¨Ù‡ M15 bullish Ø¯Ø§Ø±Ø¯</td>
                    <td class="highlight-green">âœ…</td>
                    <td>close > open</td>
                </tr>
                <tr>
                    <td>SELL Ù†ÛŒØ§Ø² Ø¨Ù‡ M15 bearish Ø¯Ø§Ø±Ø¯</td>
                    <td class="highlight-green">âœ…</td>
                    <td>close < open</td>
                </tr>
                <tr>
                    <td>Ø§Ú¯Ø± M15 aligned Ù†Ø¨Ø§Ø´Ø¯ â†’ SKIP</td>
                    <td class="highlight-green">âœ…</td>
                    <td>Ø§ÛŒÙ…ÛŒÙ„ Ø§Ø±Ø³Ø§Ù„ØŒ state.reset()</td>
                </tr>
            </table>

            <h3>âœ… Ø¨Ø±Ø±Ø³ÛŒ Ù…Ù†Ø·Ù‚ M15 Boundary</h3>
            <table>
                <tr>
                    <th>Ø¢ÛŒØªÙ…</th>
                    <th>ÙˆØ¶Ø¹ÛŒØª</th>
                    <th>ØªÙˆØ¶ÛŒØ­</th>
                </tr>
                <tr>
                    <td>is_at_m15_boundary() Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§ÛŒ :00, :15, :30, :45 Ø±Ø§ ØªØ´Ø®ÛŒØµ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯</td>
                    <td class="highlight-green">âœ…</td>
                    <td>minute % 15 == 0</td>
                </tr>
                <tr>
                    <td>Ø³ÛŒÚ¯Ù†Ø§Ù„ Ø±ÙˆÛŒ Ù…Ø±Ø² â†’ PendingSignal</td>
                    <td class="highlight-green">âœ…</td>
                    <td>Ø°Ø®ÛŒØ±Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙÛŒØ¨Ùˆ + M15</td>
                </tr>
                <tr>
                    <td>Ø§ÛŒÙ…ÛŒÙ„ PENDING Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯</td>
                    <td class="highlight-green">âœ…</td>
                    <td>Ø§Ø·Ù„Ø§Ø¹â€ŒØ±Ø³Ø§Ù†ÛŒ Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±</td>
                </tr>
                <tr>
                    <td>Ø¯Ø± Ø¯ÙˆØ± Ø¨Ø¹Ø¯ÛŒ (Ù†Ù‡ Ø±ÙˆÛŒ Ù…Ø±Ø²) Ø³ÛŒÚ¯Ù†Ø§Ù„ Ù…Ø¹Ù„Ù‚ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù…ÛŒâ€ŒØ´ÙˆØ¯</td>
                    <td class="highlight-green">âœ…</td>
                    <td>Ø´Ø±Ø·: pending_signal and not is_at_m15_boundary()</td>
                </tr>
                <tr>
                    <td>Ø±ÛŒ-Ú†Ú© M15 Ø¨Ø§ Ú©Ù†Ø¯Ù„ Ø¬Ø¯ÛŒØ¯</td>
                    <td class="highlight-green">âœ…</td>
                    <td>get_last_completed_m15_candle() Ø¯ÙˆØ¨Ø§Ø±Ù‡</td>
                </tr>
                <tr>
                    <td>Ø§Ù†Ù‚Ø¶Ø§ÛŒ Ø³ÛŒÚ¯Ù†Ø§Ù„ Ø¨Ø¹Ø¯ Ø§Ø² 2 Ø¯Ù‚ÛŒÙ‚Ù‡</td>
                    <td class="highlight-green">âœ…</td>
                    <td>is_expired(120)</td>
                </tr>
            </table>

            <h3>âœ… Ø¨Ø±Ø±Ø³ÛŒ Ø¬Ø±ÛŒØ§Ù† Ú©Ù„ÛŒ</h3>
            <table>
                <tr>
                    <th>Ø¢ÛŒØªÙ…</th>
                    <th>ÙˆØ¶Ø¹ÛŒØª</th>
                    <th>ØªÙˆØ¶ÛŒØ­</th>
                </tr>
                <tr>
                    <td>ÙÛŒÙ„ØªØ± M15 Ù‚Ø¨Ù„ Ø§Ø² Ø¨Ø±Ø±Ø³ÛŒ Ù¾ÙˆØ²ÛŒØ´Ù†â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²</td>
                    <td class="highlight-green">âœ…</td>
                    <td>ØªØ±ØªÛŒØ¨ ØµØ­ÛŒØ­</td>
                </tr>
                <tr>
                    <td>Ø¨Ø±Ø±Ø³ÛŒ M15 boundary Ø¨Ø¹Ø¯ Ø§Ø² Ù‡Ù…Ù‡ ÙÛŒÙ„ØªØ±Ù‡Ø§</td>
                    <td class="highlight-green">âœ…</td>
                    <td>ÙÙ‚Ø· Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø¹ØªØ¨Ø± delay Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯</td>
                </tr>
                <tr>
                    <td>Entry price Ø§Ø² tick ÙØ¹Ù„ÛŒ (ask/bid)</td>
                    <td class="highlight-green">âœ…</td>
                    <td>Ù‚ÛŒÙ…Øª Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ Ø¨Ø§Ø²Ø§Ø±</td>
                </tr>
                <tr>
                    <td>SL Ø§Ø² fib['1.0']</td>
                    <td class="highlight-green">âœ…</td>
                    <td>Ø³Ø·Ø­ Ø­Ù…Ø§ÛŒØª/Ù…Ù‚Ø§ÙˆÙ…Øª</td>
                </tr>
                <tr>
                    <td>TP = entry Â± (SL_distance Ã— win_ratio)</td>
                    <td class="highlight-green">âœ…</td>
                    <td>Ù†Ø³Ø¨Øª Ø±ÛŒØ³Ú© Ø¨Ù‡ Ø±ÛŒÙˆØ§Ø±Ø¯</td>
                </tr>
            </table>

            <h3>âš ï¸ Ù†Ú©Ø§Øª Ù…Ù‡Ù…</h3>
            <div class="warning">
                <ul>
                    <li><strong>Ø²Ù…Ø§Ù† Ø³Ø±ÙˆØ± MT5:</strong> ØªØ§Ø¨Ø¹ is_at_m15_boundary() Ø§Ø² datetime.now() Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ (Ø²Ù…Ø§Ù† Ø³ÛŒØ³ØªÙ…). Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ Ø²Ù…Ø§Ù† Ø³ÛŒØ³ØªÙ… Ø¨Ø§ Ø²Ù…Ø§Ù† MT5 Ù‡Ù…Ú¯Ø§Ù… Ø§Ø³Øª.</li>
                    <li><strong>Ø§Ù†Ù‚Ø¶Ø§ÛŒ Ø³ÛŒÚ¯Ù†Ø§Ù„:</strong> Ø§Ú¯Ø± Ø¨ÛŒØ´ Ø§Ø² 2 Ø¯Ù‚ÛŒÙ‚Ù‡ Ø§Ø² Ø°Ø®ÛŒØ±Ù‡ Ø³ÛŒÚ¯Ù†Ø§Ù„ Ø¨Ú¯Ø°Ø±Ø¯ØŒ Ù…Ù†Ù‚Ø¶ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ø§ÛŒÙ† Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² ÙˆØ±ÙˆØ¯ Ø¨Ø§ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù‚Ø¯ÛŒÙ…ÛŒ Ø§Ø³Øª.</li>
                    <li><strong>Ø±ÛŒ-Ú†Ú© M15:</strong> Ú©Ù†Ø¯Ù„ M15 Ù…Ø¬Ø¯Ø¯Ø§Ù‹ Ú†Ú© Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ú†ÙˆÙ† Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø¯Ø± Ø·ÙˆÙ„ ØªØ£Ø®ÛŒØ±ØŒ Ú©Ù†Ø¯Ù„ ØªØºÛŒÛŒØ± Ú©Ø±Ø¯Ù‡ Ø¨Ø§Ø´Ø¯.</li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“Š Ø®Ù„Ø§ØµÙ‡ ØªØºÛŒÛŒØ±Ø§Øª</h2>
            <div class="success">
                <h3>ØªØºÛŒÛŒØ±Ø§Øª Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯Ù‡:</h3>
                <ol>
                    <li><strong>is_at_m15_boundary():</strong> ØªØ´Ø®ÛŒØµ Ø§ÛŒÙ†Ú©Ù‡ Ø¢ÛŒØ§ Ø²Ù…Ø§Ù† Ø±ÙˆÛŒ Ù…Ø±Ø² 15 Ø¯Ù‚ÛŒÙ‚Ù‡ Ø§Ø³Øª</li>
                    <li><strong>PendingSignal:</strong> Ú©Ù„Ø§Ø³ Ø¨Ø±Ø§ÛŒ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø¹Ù„Ù‚</li>
                    <li><strong>Ù…Ù†Ø·Ù‚ BUY:</strong> Ø§Ú¯Ø± Ø±ÙˆÛŒ Ù…Ø±Ø² M15 Ø¨Ø§Ø´Ø¯ â†’ Ø°Ø®ÛŒØ±Ù‡ Ùˆ ØªØ£Ø®ÛŒØ±</li>
                    <li><strong>Ù…Ù†Ø·Ù‚ SELL:</strong> Ø§Ú¯Ø± Ø±ÙˆÛŒ Ù…Ø±Ø² M15 Ø¨Ø§Ø´Ø¯ â†’ Ø°Ø®ÛŒØ±Ù‡ Ùˆ ØªØ£Ø®ÛŒØ±</li>
                    <li><strong>Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø³ÛŒÚ¯Ù†Ø§Ù„ Ù…Ø¹Ù„Ù‚:</strong> Ø¯Ø± Ø¯ÙˆØ± Ø¨Ø¹Ø¯ÛŒ Ø¨Ø§ Ø±ÛŒ-Ú†Ú© M15</li>
                </ol>
            </div>
        </div>

        <footer style="text-align: center; margin-top: 40px; color: #666;">
            <p>ğŸ“… ØªØ§Ø±ÛŒØ® Ø§ÛŒØ¬Ø§Ø¯: February 2026</p>
            <p>ğŸ¤– Ø±Ø¨Ø§Øª Ù…Ø¹Ø§Ù…Ù„Ø§ØªÛŒ M15 Swing Fibonacci</p>
        </footer>
    </div>
</body>
</html>
